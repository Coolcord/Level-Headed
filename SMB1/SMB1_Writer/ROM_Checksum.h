#ifndef ROM_CHECKSUM_H
#define ROM_CHECKSUM_H

#include "ROM_Type.h"
#include "Unfixed_ROM_Type.h"
#include <QString>
#include <QFile>
#include <QMap>
#include <QByteArray>

class ROM_Checksum {
public:
    ROM_Checksum();
    ~ROM_Checksum();
    QString Get_ROM_Checksum(QFile *file);
    Unfixed_ROM_Type::Unfixed_ROM_Type Get_Unfixed_ROM_Type_From_Checksum(const QString &romChecksum);
    ROM_Type::ROM_Type Get_ROM_Type_From_Checksum(const QString &romChecksum);
    QString Get_ROM_Filename_From_Checksum(const QString &romChecksum);
    ROM_Type::ROM_Type Get_ROM_Type_From_Unfixed_ROM_Type(Unfixed_ROM_Type::Unfixed_ROM_Type unfixedROMType);
    bool Apply_Fixes_To_Match_Checksum(QByteArray &buffer, Unfixed_ROM_Type::Unfixed_ROM_Type unfixedROMType);

private:
    bool Check_ROM_Header(QFile *file);
    bool Check_NES_ROM_Header(QByteArray *buffer);
    bool Check_FDS_ROM_Header(QByteArray *buffer);
    bool Check_No_ROM_Header(QByteArray *buffer);
    bool Check_Track_No_ROM_Header(QByteArray *buffer);
    bool Check_Trained_No_ROM_Header(QByteArray *buffer);
    void Add_Standard_Header(QByteArray &buffer);
    void Convert_PRG1_To_PRG0(QByteArray &buffer);
    void Convert_DUCK_To_PRG0(QByteArray &buffer);
    void Convert_PC10_To_PRG0(QByteArray &buffer);
    void Convert_TRACK_To_PRG0(QByteArray &buffer);
    void Convert_Trained_To_PRG0(QByteArray &buffer);

    QMap<QString, Unfixed_ROM_Type::Unfixed_ROM_Type> *checksumMap;
    QMap<QString, QString> *fileNameMap;

    //SHA512
    const QString CHECKSUM_USA0 =               "C2EB66533F2BFEC61F15793884777B1C711AEBD74533CD33BD5774112A0381234583B9AA05588225282FD3071A42A7A4DA27BDE485D21FC0B45B2B2CA2D5461F";
    const QString CHECKSUM_USA0_HEADERLESS =    "28E2B5A96F698F78CE34AE8328B0D264131B9417EAF855938D061C97E6ED8C37642860607E2BCF4EBDA3A838E0C2588E20A134D6A4FAF054EB09F1894E6669C3";
    const QString CHECKSUM_USA1 =               "C254479DF875E6F88F015563271624641433B15DE8242DE99EB883A745D09136C81663CA86613F02188E191B9C86F032D7C2080D4AA470B1CD9DB3695F811914";
    const QString CHECKSUM_USA1_HEADERLESS =    "4D5D45B3E796230A6B3DDCB6BE0093D9190C9A6A4285B423F863214435023A7B5FD24B65FF0B41562AB1C721288599F520461A1664D728E1B82AB60A070F4C8A";
    const QString CHECKSUM_DUCK =               "C900D4B65C956D9BD1FC5459683061017745E23F82588F6C2A152ED4AD4F83025033FB9BE32734D608CC55A4F7A82CCB716BB9CC95EA0542E5F656C69D3E298C";
    const QString CHECKSUM_DUCK_HEADERLESS =    "229F97983105E0DEF92F50449403B561C171E2CCA14251497DDBEF3A8BC1E22CC774401E60887D328F5821E1262AB5A5E534ECE3935CA71719CE41C6FF544B0C";
    const QString CHECKSUM_PC10 =               "3AFE70A07ED50CB7334AC6955739FE0497E067D431A6374D2248A9E24BFDF1C9106D8FC76C7C4DEF4D3EB06FAE6657BA7AC5318F1F9936EB6848681B82DF3361";
    const QString CHECKSUM_PC10_HEADERLESS =    "D1A7F7EFCA98A915D1C091120603BD1741860A51D743785DA51B2B3E160DB25A539F492FE28679B0385338A8CD93E0495420DC88186A723F46FEBD3A8E6E7598";
    const QString CHECKSUM_TR1 =                "F1F65DBD33C85F2ECD79AF025DAE69CDF80D084A6B613F63615CA070EF01F46EC0E9D383B9A456644380643EA5F968F620858F90A12047B9E0D823C05285F94F";
    const QString CHECKSUM_TR1_HEADERLESS =     "0E9EA4CB3448F4A93C7CF98B37B330DACF6EA23F335BFEA8B6D771B31B2576BDF6B474CB07A6AF7EE7ABF1E1EDFAF27ECF742D488D22E7D6075D41528028E563";
    const QString CHECKSUM_TR2 =                "1431B4B76BCED2F2656216F4AE795E421E9ABFAC0DB094D822B51C8748EE835D3485E635BDB22878309FA7FB4D931CA45AA2BB08E0F9ED6F75009972FB96022A";
    const QString CHECKSUM_TR2_HEADERLESS =     "2A227992A3FB6364FD637BA6A4FB8C16CFEEEF0EC14FBBC5FB2094F99D47C03DAFC2FF5713F61B8BFCDEA2613A684062E2A6E1FEF9AAF528E641DDC2432BA155";
    const QString CHECKSUM_TRACK =              "7815F5BD6568AE3E2FB428CEA510415FE688971A40AF2E9D354E37AC0D3B98E74F53A8F9BD9A7FBF1785A3B785EF447B5D770F3DE77D21E4B063FC7B5D7DA5EF";
    const QString CHECKSUM_TRACK_HEADERLESS =   "1E77FDFC9E3A72860B4CCEB749AC62B9043E7560C4FC9A3D4ADF0772BED81CF8183928A87F5531037614BAC3F5069AF3172F1D17AACAA399FEDC76B88F0B6015";
    const QString CHECKSUM_COOP_CGTI_1 =        "CF536C1E82DA8CE57A8A0BEBDA9050A137F07F3A214AACF837EC7C1E54B921E9998E23EB25124F4759669CDC5274A8B814C0E27349A15062D32A5A2EE31B74E5";
};

#endif // ROM_CHECKSUM_H
